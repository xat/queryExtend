!function(n){var e=function(n){var e={};return n?(p(n.split("&"),function(n){var t=n.split("="),o=r(t[0]),u=decodeURIComponent(o.val),a=t[1]&&decodeURIComponent(t[1]);"array"===o.type?(e[u]||(e[u]=[]),e[u].push(a)):"string"===o.type&&(e[u]=a)}),e):e},t=function(n){var e,t=[];for(var r in n)n.hasOwnProperty(r)&&("undefined"!=typeof n[r]?(e=encodeURIComponent(r),o(n[r])?p(n[r],function(n){t.push(e+"[]="+encodeURIComponent(n))}):t.push(e+"="+encodeURIComponent(n[r]))):t.push(encodeURIComponent(r)));return t.length?"?"+t.join("&"):""},r=function(n){var e=n.indexOf("[");return-1===e?{type:"string",val:n}:{type:"array",val:n.substr(0,e)}},o=function(n){return"[object Array]"===Object.prototype.toString.call(n)},u=function(n){var e=n.lastIndexOf("?"),t=-1!==e,r=void 0;return t&&e>0?r=n.substring(0,e):!t&&n&&n.length>0&&(r=n),{base:r,query:t?n.substring(e+1):void 0}},a=function(){for(var n={},e=0;e<arguments.length;e++){var t=arguments[e];for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])}return n},i=function(){var n=Array.prototype.slice.call(arguments,0),r=n[n.length-1]===!0,o="";if(!n.length)return o;r&&n.pop();var i=f(n,function(n){if("string"==typeof n){var t=u(n);return t.base&&(o=t.base),e(t.query)}return n});return r?a.apply({},i):o+t(a.apply({},i))},p=function(n,e){for(var t=0,r=n.length;r>t;t++)e(n[t],t)},f=function(n,e){for(var t=[],r=0,o=n.length;o>r;r++)t.push(e(n[r],r));return t};"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):n.queryExtend=i}(this);